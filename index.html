<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Ch·ªçn m√†u ƒë√∫ng!</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            text-align: center;
            background: #f0f4f8;
            padding: 30px;
        }
        h1 {
            color: #333;
        }
        #level, #timer {
            font-size: 20px;
            margin: 10px;
        }
        #targetColor {
            font-weight: bold;
            font-size: 24px;
            margin: 20px;
        }
        #board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            max-width: 600px; /* C√≥ th·ªÉ tƒÉng max-width n·∫øu s·ªë n√∫t qu√° nhi·ªÅu */
            margin-left: auto;
            margin-right: auto;
        }
        .color-btn {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: 0.3s;
        }
        .color-btn:hover {
            transform: scale(1.05);
            border-color: #555;
        }
        #message {
            margin-top: 20px;
            font-size: 22px;
            color: #008000;
        }
        #startBtn {
            padding: 10px 20px;
            font-size: 18px;
            margin-top: 20px;
            background-color: #2c89e8;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        #startBtn:hover {
            background-color: #1e70c1;
        }
    </style>
</head>
<body>

    <h1>üéØ Ch·ªçn ƒë√∫ng m√†u trong 10 gi√¢y!</h1>
    <div id="level">C·∫•p ƒë·ªô: 1</div>
    <div id="timer">Th·ªùi gian: 10s</div>
    <div>M√†u c·∫ßn ch·ªçn:</div>
    <div id="targetColor">ƒê·ªè</div>
    <div id="board"></div>
    <div id="message"></div>
    <button id="startBtn">B·∫Øt ƒë·∫ßu tr√≤ ch∆°i</button>

    <script>
        // B·∫£n ƒë·ªì √°nh x·∫° t√™n m√†u ti·∫øng Vi·ªát v·ªõi m√£ m√†u h·ª£p l·ªá (Hex ho·∫∑c t√™n ti·∫øng Anh)
        // ƒê√£ th√™m nhi·ªÅu m√†u h∆°n ƒë·ªÉ tƒÉng ƒë·ªô ƒëa d·∫°ng
        const colorMap = {
            'ƒê·ªè': '#FF0000',
            'Xanh l√° c√¢y': '#008000',
            'Xanh d∆∞∆°ng': '#0000FF',
            'Cam': '#FFA500',
            'T√≠m': '#800080',
            'H·ªìng': '#FFC0CB',
            'V√†ng': '#FFFF00',
            'Xanh lam': '#00FFFF', // Cyan
            'N√¢u': '#A52A2A',
            'X√°m': '#808080',
            'ƒêen': '#000000',
            'Tr·∫Øng': '#FFFFFF',
            'V√†ng kim': '#FFD700',
            'B·∫°c': '#C0C0C0',
            'Xanh ƒë·∫≠m': '#00008B', // Dark blue
            'Xanh l√° ƒë·∫≠m': '#006400', // Dark green
            'H·ªìng t∆∞∆°i': '#FF00FF', // Magenta
            'Xanh b·∫°c h√†': '#98FF98', // Mint Green
            'H·ªï ph√°ch': '#FFBF00', // Amber
            'Xanh chanh': '#32CD32' // Lime Green
        };

        // L·∫•y danh s√°ch t√™n m√†u ti·∫øng Vi·ªát t·ª´ colorMap ƒë·ªÉ d√πng trong tr√≤ ch∆°i
        const colors = Object.keys(colorMap); 

        // C·∫•u h√¨nh c·∫•p ƒë·ªô: TƒÉng s·ªë l∆∞·ª£ng n√∫t (count) v√† gi·∫£m th·ªùi gian (time)
        const levelSettings = [
            { count: 4, time: 10 },    // C·∫•p 1: 4 n√∫t, 10s
            { count: 6, time: 9 },     // C·∫•p 2: 6 n√∫t, 9s
            { count: 8, time: 8 },     // C·∫•p 3: 8 n√∫t, 8s
            { count: 10, time: 7 },    // C·∫•p 4: 10 n√∫t, 7s
            { count: 12, time: 6 },    // C·∫•p 5: 12 n√∫t, 6s
            { count: 15, time: 6 },    // C·∫•p 6: 15 n√∫t, 6s
            { count: 18, time: 5 },    // C·∫•p 7: 18 n√∫t, 5s
            { count: 20, time: 5 },    // C·∫•p 8: 20 n√∫t, 5s
            { count: 24, time: 4 },    // C·∫•p 9: 24 n√∫t, 4s
            { count: 28, time: 4 },    // C·∫•p 10: 28 n√∫t, 4s
            { count: 32, time: 3 }     // C·∫•p 11: 32 n√∫t, 3s (r·∫•t kh√≥)
            // B·∫°n c√≥ th·ªÉ th√™m ho·∫∑c ƒëi·ªÅu ch·ªânh th√™m c·∫•p ƒë·ªô ·ªü ƒë√¢y
        ];

        let currentLevel = 0;
        let correctColorName = ''; 
        let timeLeft = 10;
        let timer;
        let correctButtons = 0;

        const board = document.getElementById('board');
        const targetColorDisplay = document.getElementById('targetColor');
        const timerDisplay = document.getElementById('timer');
        const levelDisplay = document.getElementById('level');
        const message = document.getElementById('message');
        const startBtn = document.getElementById('startBtn');

        startBtn.onclick = startLevel;

        function startLevel() {
            if (currentLevel >= levelSettings.length) {
                message.textContent = 'üéâ Ch√∫c m·ª´ng, b·∫°n ƒë√£ ho√†n th√†nh t·∫•t c·∫£ c√°c c·∫•p ƒë·ªô!';
                startBtn.style.display = 'none';
                return;
            }

            // Reset
            board.innerHTML = '';
            message.textContent = '';
            startBtn.style.display = 'none';
            const level = levelSettings[currentLevel];

            correctColorName = colors[Math.floor(Math.random() * colors.length)];
            
            targetColorDisplay.textContent = correctColorName; 
            levelDisplay.textContent = `C·∫•p ƒë·ªô: ${currentLevel + 1}`;
            timeLeft = level.time;
            correctButtons = 0;

            let total = level.count;
            // Gi·ªØ s·ªë l∆∞·ª£ng m√†u ƒë√∫ng ·ªü m·ª©c h·ª£p l√Ω, v√≠ d·ª• 1/3 t·ªïng s·ªë n√∫t ho·∫∑c t·ªëi thi·ªÉu 2 n√∫t ƒë√∫ng
            let correctCount = Math.max(2, Math.floor(total / 3)); 
            correctButtons = correctCount;

            let allColorNames = []; 

            // Th√™m t√™n m√†u ƒë√∫ng
            for (let i = 0; i < correctCount; i++) {
                allColorNames.push(correctColorName);
            }

            // Th√™m t√™n m√†u sai
            while (allColorNames.length < total) {
                let wrongColorName = colors[Math.floor(Math.random() * colors.length)];
                // ƒê·∫£m b·∫£o m√†u sai kh√¥ng tr√πng v·ªõi m√†u ƒë√∫ng v√† c√≥ ƒë·ªß m√†u kh√°c nhau
                if (wrongColorName !== correctColorName && !allColorNames.includes(wrongColorName)) {
                    allColorNames.push(wrongColorName);
                }
                // N·∫øu kh√¥ng th·ªÉ t√¨m m√†u sai kh√°c, c√≥ th·ªÉ th√™m m√†u sai tr√πng n·∫øu c·∫ßn l·∫•p ƒë·∫ßy
                else if (!allColorNames.includes(wrongColorName)) { // Tr√°nh l·∫∑p l·∫°i qu√° nhi·ªÅu c√πng 1 m√†u sai
                    allColorNames.push(wrongColorName);
                }
                // ƒê·∫£m b·∫£o kh√¥ng b·ªã m·∫Øc k·∫πt n·∫øu s·ªë l∆∞·ª£ng m√†u trong colorMap √≠t h∆°n total
                if (Object.keys(colorMap).length < total) {
                    // N·∫øu kh√¥ng ƒë·ªß m√†u ƒë·ªôc ƒë√°o, ch·∫•p nh·∫≠n l·∫∑p l·∫°i m√†u sai
                    while (allColorNames.length < total) {
                        allColorNames.push(colors[Math.floor(Math.random() * colors.length)]);
                    }
                    break;
                }
            }

            // Tr·ªôn c√°c t√™n m√†u
            allColorNames = allColorNames.sort(() => Math.random() - 0.5);

            // T·∫°o n√∫t
            allColorNames.forEach(name => {
                const btn = document.createElement('button');
                btn.classList.add('color-btn');
                btn.style.backgroundColor = colorMap[name]; 
                btn.onclick = () => handleClick(btn, name); 
                board.appendChild(btn);
            });

            updateTimer();
            timer = setInterval(() => {
                timeLeft--;
                updateTimer();
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    gameOver(false);
                }
            }, 1000);
        }

        function handleClick(btn, clickedColorName) {
            if (clickedColorName === correctColorName) { 
                btn.disabled = true;
                btn.style.opacity = 0.3;
                correctButtons--;
                if (correctButtons === 0) {
                    clearInterval(timer);
                    gameOver(true);
                }
            } else {
                btn.style.borderColor = 'red';
                clearInterval(timer);
                gameOver(false);
            }
        }

        function gameOver(success) {
            if (success) {
                message.textContent = '‚úÖ Ch√∫c m·ª´ng b·∫°n ƒë√£ v∆∞·ª£t qua c·∫•p ƒë·ªô ti·∫øp theo!';
                message.style.color = 'green';
                currentLevel++;
            } else {
                message.textContent = '‚ùå Sai ho·∫∑c h·∫øt th·ªùi gian, nh·∫•n F5 ƒë·ªÉ ch∆°i l·∫°i!';
                message.style.color = 'red';
            }
            startBtn.style.display = 'inline-block';
        }

        function updateTimer() {
            timerDisplay.textContent = `Th·ªùi gian: ${timeLeft}s`;
        }
    </script>

</body>
</html>
