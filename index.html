<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>é€‰æ‹©æ­£ç¡®çš„é¢œè‰²!</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            text-align: center;
            background: #f0f4f8;
            padding: 30px;
        }
        h1 {
            color: #333;
        }
        #level, #timer {
            font-size: 20px;
            margin: 10px;
        }
        #targetColor {
            font-weight: bold;
            font-size: 24px;
            margin: 20px;
        }
        #board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            max-width: 600px; /* CÃ³ thá»ƒ tÄƒng max-width náº¿u sá»‘ nÃºt quÃ¡ nhiá»u */
            margin-left: auto;
            margin-right: auto;
        }
        .color-btn {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: 0.3s;
        }
        .color-btn:hover {
            transform: scale(1.05);
            border-color: #555;
        }
        #message {
            margin-top: 20px;
            font-size: 22px;
            color: #008000;
        }
        #startBtn {
            padding: 10px 20px;
            font-size: 18px;
            margin-top: 20px;
            background-color: #2c89e8;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        #startBtn:hover {
            background-color: #1e70c1;
        }
    </style>
</head>
<body>

    <h1>ğŸ¯ åœ¨10ç§’å†…é€‰å¯¹é¢œè‰²ï¼</h1>
    <div id="level">çº§åˆ«: 1</div>
    <div id="timer">æ—¶é—´: 10s</div>
    <div>è¦é€‰æ‹©çš„é¢œè‰²:</div>
    <div id="targetColor">çº¢è‰²</div>
    <div id="board"></div>
    <div id="message"></div>
    <button id="startBtn">å¼€å§‹æ¸¸æˆ</button>

    <script>
        // Báº£n Ä‘á»“ Ã¡nh xáº¡ tÃªn mÃ u tiáº¿ng Trung vá»›i mÃ£ mÃ u há»£p lá»‡ (Hex hoáº·c tÃªn tiáº¿ng Anh)
        // ÄÃ£ thÃªm nhiá»u mÃ u hÆ¡n Ä‘á»ƒ tÄƒng Ä‘á»™ Ä‘a dáº¡ng
        const colorMap = {
            'çº¢è‰²': '#FF0000',      // Äá»
            'ç»¿è‰²': '#008000',      // Xanh lÃ¡ cÃ¢y
            'è“è‰²': '#0000FF',      // Xanh dÆ°Æ¡ng
            'æ©™è‰²': '#FFA500',      // Cam
            'ç´«è‰²': '#800080',      // TÃ­m
            'ç²‰è‰²': '#FFC0CB',      // Há»“ng
            'é»„è‰²': '#FFFF00',      // VÃ ng
            'é’è‰²': '#00FFFF',      // Xanh lam/Cyan
            'æ£•è‰²': '#A52A2A',      // NÃ¢u
            'ç°è‰²': '#808080',      // XÃ¡m
            'é»‘è‰²': '#000000',      // Äen
            'ç™½è‰²': '#FFFFFF',      // Tráº¯ng
            'é‡‘è‰²': '#FFD700',      // VÃ ng kim
            'é“¶è‰²': '#C0C0C0',      // Báº¡c
            'æ·±è“': '#00008B',      // Xanh Ä‘áº­m
            'æ·±ç»¿': '#006400',      // Xanh lÃ¡ Ä‘áº­m
            'æ´‹çº¢': '#FF00FF',      // Magenta
            'è–„è·ç»¿': '#98FF98',    // Mint Green
            'ç¥ç€è‰²': '#FFBF00',    // Amber
            'çŸ³ç°ç»¿': '#32CD32'     // Lime Green
        };

        // Láº¥y danh sÃ¡ch tÃªn mÃ u tiáº¿ng Trung tá»« colorMap Ä‘á»ƒ dÃ¹ng trong trÃ² chÆ¡i
        const colors = Object.keys(colorMap); 

        // Cáº¥u hÃ¬nh cáº¥p Ä‘á»™: TÄƒng sá»‘ lÆ°á»£ng nÃºt (count) vÃ  giáº£m thá»i gian (time)
        const levelSettings = [
            { count: 4, time: 10 },    // Cáº¥p 1: 4 nÃºt, 10s
            { count: 6, time: 9 },     // Cáº¥p 2: 6 nÃºt, 9s
            { count: 8, time: 8 },     // Cáº¥p 3: 8 nÃºt, 8s
            { count: 10, time: 7 },    // Cáº¥p 4: 10 nÃºt, 7s
            { count: 12, time: 6 },    // Cáº¥p 5: 12 nÃºt, 6s
            { count: 15, time: 6 },    // Cáº¥p 6: 15 nÃºt, 6s
            { count: 18, time: 5 },    // Cáº¥p 7: 18 nÃºt, 5s
            { count: 20, time: 5 },    // Cáº¥p 8: 20 nÃºt, 5s
            { count: 24, time: 4 },    // Cáº¥p 9: 24 nÃºt, 4s
            { count: 28, time: 4 },    // Cáº¥p 10: 28 nÃºt, 4s
            { count: 32, time: 3 }     // Cáº¥p 11: 32 nÃºt, 3s (ráº¥t khÃ³)
            // Báº¡n cÃ³ thá»ƒ thÃªm hoáº·c Ä‘iá»u chá»‰nh thÃªm cáº¥p Ä‘á»™ á»Ÿ Ä‘Ã¢y
        ];

        let currentLevel = 0;
        let correctColorName = ''; 
        let timeLeft = 10;
        let timer;
        let correctButtons = 0;

        const board = document.getElementById('board');
        const targetColorDisplay = document.getElementById('targetColor');
        const timerDisplay = document.getElementById('timer');
        const levelDisplay = document.getElementById('level');
        const message = document.getElementById('message');
        const startBtn = document.getElementById('startBtn');

        startBtn.onclick = startLevel;

        function startLevel() {
            if (currentLevel >= levelSettings.length) {
                message.textContent = 'ğŸ‰ æ­å–œï¼Œä½ å·²ç»å®Œæˆäº†æ‰€æœ‰çº§åˆ«ï¼';
                startBtn.style.display = 'none';
                return;
            }

            // Reset
            board.innerHTML = '';
            message.textContent = '';
            startBtn.style.display = 'none';
            const level = levelSettings[currentLevel];

            correctColorName = colors[Math.floor(Math.random() * colors.length)];
            
            targetColorDisplay.textContent = correctColorName; 
            levelDisplay.textContent = `çº§åˆ«: ${currentLevel + 1}`;
            timeLeft = level.time;
            correctButtons = 0;

            let total = level.count;
            // Giá»¯ sá»‘ lÆ°á»£ng mÃ u Ä‘Ãºng á»Ÿ má»©c há»£p lÃ½, vÃ­ dá»¥ 1/3 tá»•ng sá»‘ nÃºt hoáº·c tá»‘i thiá»ƒu 2 nÃºt Ä‘Ãºng
            let correctCount = Math.max(2, Math.floor(total / 3)); 
            correctButtons = correctCount;

            let allColorNames = []; 

            // ThÃªm tÃªn mÃ u Ä‘Ãºng
            for (let i = 0; i < correctCount; i++) {
                allColorNames.push(correctColorName);
            }

            // ThÃªm tÃªn mÃ u sai
            while (allColorNames.length < total) {
                let wrongColorName = colors[Math.floor(Math.random() * colors.length)];
                // Äáº£m báº£o mÃ u sai khÃ´ng trÃ¹ng vá»›i mÃ u Ä‘Ãºng vÃ  cÃ³ Ä‘á»§ mÃ u khÃ¡c nhau
                if (wrongColorName !== correctColorName && !allColorNames.includes(wrongColorName)) {
                    allColorNames.push(wrongColorName);
                }
                // Náº¿u khÃ´ng thá»ƒ tÃ¬m mÃ u sai khÃ¡c, cÃ³ thá»ƒ thÃªm mÃ u sai trÃ¹ng náº¿u cáº§n láº¥p Ä‘áº§y
                else if (!allColorNames.includes(wrongColorName)) { // TrÃ¡nh láº·p láº¡i quÃ¡ nhiá»u cÃ¹ng 1 mÃ u sai
                     allColorNames.push(wrongColorName);
                }
                 // Äáº£m báº£o khÃ´ng bá»‹ máº¯c káº¹t náº¿u sá»‘ lÆ°á»£ng mÃ u trong colorMap Ã­t hÆ¡n total
                 if (Object.keys(colorMap).length < total) {
                    // Náº¿u khÃ´ng Ä‘á»§ mÃ u Ä‘á»™c Ä‘Ã¡o, cháº¥p nháº­n láº·p láº¡i mÃ u sai
                    while (allColorNames.length < total) {
                        allColorNames.push(colors[Math.floor(Math.random() * colors.length)]);
                    }
                    break;
                }
            }

            // Trá»™n cÃ¡c tÃªn mÃ u
            allColorNames = allColorNames.sort(() => Math.random() - 0.5);

            // Táº¡o nÃºt
            allColorNames.forEach(name => {
                const btn = document.createElement('button');
                btn.classList.add('color-btn');
                btn.style.backgroundColor = colorMap[name]; 
                btn.onclick = () => handleClick(btn, name); 
                board.appendChild(btn);
            });

            updateTimer();
            timer = setInterval(() => {
                timeLeft--;
                updateTimer();
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    gameOver(false);
                }
            }, 1000);
        }

        function handleClick(btn, clickedColorName) {
            if (clickedColorName === correctColorName) { 
                btn.disabled = true;
                btn.style.opacity = 0.3;
                correctButtons--;
                if (correctButtons === 0) {
                    clearInterval(timer);
                    gameOver(true);
                }
            } else {
                btn.style.borderColor = 'red';
                clearInterval(timer);
                gameOver(false);
            }
        }

        function gameOver(success) {
            if (success) {
                message.textContent = 'âœ… æ­å–œä½ æˆåŠŸé€šè¿‡ä¸‹ä¸€å…³ï¼';
                message.style.color = 'green';
                currentLevel++;
            } else {
                message.textContent = 'âŒ é”™è¯¯æˆ–æ—¶é—´åˆ°ï¼ŒæŒ‰F5é‡æ–°å¼€å§‹ï¼';
                message.style.color = 'red';
            }
            startBtn.style.display = 'inline-block';
        }

        function updateTimer() {
            timerDisplay.textContent = `æ—¶é—´: ${timeLeft}s`;
        }
    </script>

</body>
</html>